<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Card Validator </title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .card-container {
            background: linear-gradient(135deg, #4a6bff, #8a2be2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }
        
        .card-logo {
            text-align: right;
            font-size: 24px;
            margin-bottom: 30px;
        }
        
        .card-number {
            font-size: 24px;
            letter-spacing: 2px;
            margin-bottom: 20px;
            word-spacing: 8px;
        }
        
        .card-details {
            display: flex;
            justify-content: space-between;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        button {
            background-color: #4a6bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }
        
        button:hover {
            background-color: #3a5bef;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
            display: none;
        }
        
        .valid {
            background-color: #d4edda;
            color: #155724;
            display: block;
        }
        
        .invalid {
            background-color: #f8d7da;
            color: #721c24;
            display: block;
        }
        
        .card-type {
            margin-top: 10px;
            font-size: 14px;
            color: rgba(255,255,255,0.8);
        }
        
        .luhn-explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: #e7f1ff;
            border-radius: 4px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="card-container">
        <div class="card-logo" id="card-logo">••••</div>
        <div class="card-number" id="card-display">•••• •••• •••• ••••</div>
        <div class="card-details">
            <div>
                <div>CARD HOLDER</div>
                <div id="card-holder">YOUR NAME</div>
            </div>
            <div>
                <div>EXPIRES</div>
                <div id="card-expiry">••/••</div>
            </div>
        </div>
        <div class="card-type" id="card-type">Enter card number to detect type</div>
    </div>
    
    <form id="card-form">
        <div class="form-group">
            <label for="card-number">Card Number</label>
            <input type="text" id="card-number" maxlength="19" placeholder="1234 5678 9012 3456">
        </div>
        
        <div class="form-group">
            <label for="card-name">Cardholder Name</label>
            <input type="text" id="card-name" placeholder="John Doe">
        </div>
        
        <div class="form-group">
            <label for="card-expiry">Expiration Date</label>
            <input type="text" id="card-expiry-input" placeholder="MM/YY">
        </div>
        
        <div class="form-group">
            <label for="card-cvv">CVV</label>
            <input type="text" id="card-cvv" maxlength="4" placeholder="123">
        </div>
        
        <button type="submit">Validate Card</button>
    </form>
    
    <div class="result" id="result"></div>
    
    <div class="luhn-explanation">
        
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const cardNumberInput = document.getElementById('card-number');
            const cardDisplay = document.getElementById('card-display');
            const cardNameInput = document.getElementById('card-name');
            const cardHolder = document.getElementById('card-holder');
            const cardExpiryInput = document.getElementById('card-expiry-input');
            const cardExpiryDisplay = document.getElementById('card-expiry');
            const cardLogo = document.getElementById('card-logo');
            const cardType = document.getElementById('card-type');
            const resultDiv = document.getElementById('result');
            const form = document.getElementById('card-form');
            
            // Format card number with spaces
            cardNumberInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\s+/g, '');
                if (value.length > 0) {
                    value = value.match(new RegExp('.{1,4}', 'g')).join(' ');
                }
                e.target.value = value;
                cardDisplay.textContent = value || '•••• •••• •••• ••••';
                
                // Detect card type
                detectCardType(value.replace(/\s/g, ''));
            });
            
            // Update card holder name
            cardNameInput.addEventListener('input', function(e) {
                cardHolder.textContent = e.target.value || 'YOUR NAME';
            });
            
            // Format expiration date
            cardExpiryInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                e.target.value = value;
                cardExpiryDisplay.textContent = value || '••/••';
            });
            
            // Form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const cardNumber = cardNumberInput.value.replace(/\s/g, '');
                const cardName = cardNameInput.value;
                const expiry = cardExpiryInput.value;
                const cvv = document.getElementById('card-cvv').value;
                
                // Basic validation
                if (!cardNumber || !cardName || !expiry || !cvv) {
                    showResult('Please fill in all fields', false);
                    return;
                }
                
                // Validate card number with Luhn algorithm
                const isValid = validateWithLuhn(cardNumber);
                
                if (isValid) {
                    showResult('✓ Valid credit card number (passed Luhn check)', true);
                } else {
                    showResult('✗ Invalid credit card number (failed Luhn check)', false);
                }
            });
            
            // Luhn algorithm implementation
            function validateWithLuhn(cardNumber) {
                // Remove all non-digit characters
                cardNumber = cardNumber.replace(/\D/g, '');
                
                // Check if the card number is empty or contains non-digits
                if (!cardNumber || !/^\d+$/.test(cardNumber)) {
                    return false;
                }
                
                let sum = 0;
                let shouldDouble = false;
                
                // Loop from the end to the beginning
                for (let i = cardNumber.length - 1; i >= 0; i--) {
                    let digit = parseInt(cardNumber.charAt(i), 10);
                    
                    if (shouldDouble) {
                        digit *= 2;
                        if (digit > 9) {
                            digit -= 9;
                        }
                    }
                    
                    sum += digit;
                    shouldDouble = !shouldDouble;
                }
                
                return (sum % 10) === 0;
            }
            
            // Detect card type based on number
            function detectCardType(cardNumber) {
                cardNumber = cardNumber.replace(/\D/g, '');
                
                let type = 'Unknown';
                let logo = '••••';
                
                // Visa
                if (/^4/.test(cardNumber)) {
                    type = 'Visa';
                    logo = 'VISA';
                } 
                // Mastercard
                else if (/^5[1-5]/.test(cardNumber)) {
                    type = 'Mastercard';
                    logo = 'MC';
                } 
                // American Express
                else if (/^3[47]/.test(cardNumber)) {
                    type = 'American Express';
                    logo = 'AMEX';
                } 
                // Discover
                else if (/^6(?:011|5)/.test(cardNumber)) {
                    type = 'Discover';
                    logo = 'DISC';
                }
                // Diners Club
                else if (/^3(?:0[0-5]|[68])/.test(cardNumber)) {
                    type = 'Diners Club';
                    logo = 'Diners';
                }
                // JCB
                else if (/^35(2[89]|[3-8])/.test(cardNumber)) {
                    type = 'JCB';
                    logo = 'JCB';
                }
                // UnionPay
                else if (/^62/.test(cardNumber)) {
                    type = 'UnionPay';
                    logo = 'UnionPay';
                }
                
                cardType.textContent = type !== 'Unknown' ? 
                    `Card type: ${type}` : 'Enter card number to detect type';
                cardLogo.textContent = logo;
            }
            
            function showResult(message, isValid) {
                resultDiv.textContent = message;
                resultDiv.className = 'result ' + (isValid ? 'valid' : 'invalid');
            }
        });
    </script>
</body>
</html>
